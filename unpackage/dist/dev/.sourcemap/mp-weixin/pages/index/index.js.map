{"version":3,"sources":["uni-app:///main.js","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?d5ad","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?cfc8","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?9377","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?e59c","uni-app:///pages/index/index.vue","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?8c91","webpack:////Users/quanshunzhi/WeChatProjects/atr-risk-miniapp_uni/pages/index/index.vue?ea9e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","calcATR","fetchCandlesFromBinance","fetchSpotPrice","fetchFuturesPrice","SYMBOL_OPTIONS","INTERVAL_OPTIONS","calcPositionSize","components","UiSection","UiButton","UiResultCard","data","symbolOptions","symbol","intervalOptions","interval","atrPeriodInput","atrMultInput","equityInput","riskPercentInput","leverageInput","entryPriceInput","directionOptions","direction","spotPrice","futuresPrice","priceDiff","loading","atr","stopLossPrice","error","rrRatio","riskAmount","stopDistance","positionNotional","positionQty","onLoad","methods","onSymbolSelect","onIntervalSelect","onDirectionChange","onAtrPeriodInput","onAtrMultInput","onEquityInput","onRiskPercentInput","onLeverageInput","onEntryPriceInput","refreshPrices","Promise","then","spot","fut","catch","console","onCalcTap","riskDistance","equity","riskPercent","leverage","entryPrice","baseResult"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAozB,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6Gx0B;;AAEA;EAAAC;AACA;EAAAC;EAAAC;EAAAC;AACA;EAAAC;EAAAC;AACA;EAAAC;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;;MAEA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACA;;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;;MAEA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IAEAC;MAAA;MACA;MACA;MACA,aACA;QACAzB;MACA,GACA;QACA;MACA,EACA;IACA;IAEA0B;MACA;MACA;QACAxB;MACA;IACA;IAEAyB;MACA;MACA;QACAjB;MACA;IACA;IAEA;IAEAkB;MACA;QACAzB;MACA;IACA;IAEA0B;MACA;QACAzB;MACA;IACA;IAEA0B;MACA;QACAzB;MACA;IACA;IAEA0B;MACA;QACAzB;MACA;IACA;IAEA0B;MACA;QACAzB;MACA;IACA;IAEA0B;MACA;QACAzB;MACA;IACA;IAEA;IAEA0B;MAAA;MACA;MACA;QACAvB;QACAC;QACAC;MACA;MACAsB,iEACAC;QAAA;UAAAC;UAAAC;QACA;QACA;UACA3B;UACAC;UACAC;QACA;MACA,GACA0B;QACAC;QACA;UACAvB;QACA;MACA;IACA;IAEA;IACAwB;MAAA;MACA;QAAArC;QAAAI;QAAAE;QAAAV;QAAAE;QAAAG;QAAAC;QAAAC;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACA;UACAU;UACAF;UACAC;UACAG;UACAC;UACAC;UACAC;UACAJ;QACA;QACA;MACA;MACA;QACA;UACAD;UACAF;UACAC;UACAG;UACAC;UACAC;UACAC;UACAJ;QACA;QACA;MACA;MACA;QACA;UACAD;UACAF;UACAC;UACAG;UACAC;UACAC;UACAC;UACAJ;QACA;QACA;MACA;MACA;QACAJ;QACAG;QACAF;QACAC;QACAG;QACAC;QACAC;QACAC;QACAJ;MACA;;MAEA;MACA9B,+CACAgD;QACA;QACA;UACA;YACAtB;YACAG;UACA;UACA;QACA;;QAEA;QACA;QACA;UACAD;QACA;UACAA;QACA;;QAEA;QACA;QACA;UACA0B;QACA;UACAA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;UACA5B;UACAC;UACAC;UACAI;UACAF;QACA;;QAEA;QACA;UACA;YACAyB;YACAC;YACAC;YACAC;YACA9B;UACA;UACA;YACA,+CACA+B;cACA5B;cACA;cACA;cACAE;cACAC;YAAA,GACA;YACA;UACA;QACA;;QAEA;QACA;MACA,GACAiB;QACAC;QACA;UACA1B;UACAG;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;ACjZA;AAAA;AAAA;AAAA;AAA2pC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACA/qC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"container\">\n        <!-- 交易对选择 -->\n        <UiSection label=\"交易对\">\n            <picker mode=\"selector\" :range=\"symbolOptions\" @change=\"onSymbolSelect\">\n                <view class=\"picker\">当前：{{ symbol }}</view>\n            </picker>\n        </UiSection>\n\n        <!-- 最新价格 -->\n        <UiSection label=\"最新价格\">\n            <view class=\"price-grid\">\n                <view class=\"price-item price-row-bg\">\n                    <view class=\"price-title\">现货</view>\n                    <view class=\"price-value\">{{ spotPrice || '-' }}</view>\n                </view>\n\n                <view class=\"price-item price-row-bg\">\n                    <view class=\"price-title\">合约</view>\n                    <view class=\"price-value\">{{ futuresPrice || '-' }}</view>\n                </view>\n\n                <view class=\"price-item price-row-bg\">\n                    <view class=\"price-title\">合约 - 现货</view>\n                    <view :class=\"'price-value ' + (priceDiff === null ? '' : priceDiff >= 0 ? 'price-up' : 'price-down')\">\n                        {{ priceDiff === null ? '-' : priceDiff }}\n                    </view>\n                </view>\n            </view>\n\n            <view class=\"price-actions\">\n                <button class=\"mini-btn\" size=\"mini\" @tap=\"refreshPrices\">刷新价格</button>\n            </view>\n        </UiSection>\n\n        <!-- K线周期（ATR 使用此周期） -->\n        <UiSection label=\"K线周期（ATR 使用此周期）\">\n            <picker mode=\"selector\" :range=\"intervalOptions\" @change=\"onIntervalSelect\">\n                <view class=\"picker\">当前：{{ interval }}</view>\n            </picker>\n        </UiSection>\n\n        <!-- ATR 周期 -->\n        <UiSection label=\"ATR 周期\">\n            <input type=\"number\" :value=\"atrPeriodInput\" placeholder=\"14\" @input=\"onAtrPeriodInput\" />\n        </UiSection>\n\n        <!-- ATR 倍数 -->\n        <UiSection label=\"ATR 倍数（例如 1.5）\">\n            <input type=\"digit\" :value=\"atrMultInput\" placeholder=\"1.5\" @input=\"onAtrMultInput\" />\n        </UiSection>\n\n        <!-- 风控参数 -->\n        <UiSection label=\"风控参数\">\n            <view>\n                <view class=\"sub-label\">总本金（U）</view>\n                <input type=\"digit\" :value=\"equityInput\" placeholder=\"例如 500\" @input=\"onEquityInput\" />\n\n                <view class=\"sub-label\">单笔风险（%）</view>\n                <input type=\"digit\" :value=\"riskPercentInput\" placeholder=\"例如 1 或 2\" @input=\"onRiskPercentInput\" />\n\n                <view class=\"sub-label\">杠杆倍数</view>\n                <input type=\"digit\" :value=\"leverageInput\" placeholder=\"例如 3 或 5\" @input=\"onLeverageInput\" />\n            </view>\n        </UiSection>\n\n        <!-- 开仓方向 -->\n        <UiSection label=\"开仓方向\">\n            <picker mode=\"selector\" :range=\"directionOptions\" @change=\"onDirectionChange\">\n                <view class=\"picker\">当前：{{ direction === 'long' ? '多单' : '空单' }}</view>\n            </picker>\n        </UiSection>\n\n        <!-- 开仓价 -->\n        <UiSection label=\"开仓价（Entry Price）\">\n            <input type=\"digit\" :value=\"entryPriceInput\" placeholder=\"请输入手动开仓价\" @input=\"onEntryPriceInput\" />\n        </UiSection>\n\n        <!-- 计算按钮 -->\n        <UiButton text=\"计算 ATR、止损与仓位建议\" :loading=\"loading\" @tap.native=\"onCalcTap\" />\n\n        <!-- 结果卡片：交易计划 -->\n        <UiResultCard\n            :symbol=\"symbol\"\n            :interval=\"interval\"\n            :direction=\"direction\"\n            :atr=\"atr\"\n            :atrPeriodInput=\"atrPeriodInput\"\n            :entryPriceInput=\"entryPriceInput\"\n            :stopLossPrice=\"stopLossPrice\"\n            :riskPercentInput=\"riskPercentInput\"\n            :riskAmount=\"riskAmount\"\n            :stopDistance=\"stopDistance\"\n            :positionNotional=\"positionNotional\"\n            :positionQty=\"positionQty\"\n            :rrRatio=\"rrRatio\"\n        />\n\n        <!-- 错误提示 -->\n        <view class=\"error\" v-if=\"error\">\n            {{ error }}\n        </view>\n    </view>\n</template>\n\n<script>\nimport UiSection from '@/components/ui-section/ui-section';\nimport UiButton from '@/components/ui-button/ui-button';\nimport UiResultCard from '@/components/ui-result-card/ui-result-card';\n// pages/index/index.js\n\nconst { calcATR } = require('../../utils/atr.js');\nconst { fetchCandlesFromBinance, fetchSpotPrice, fetchFuturesPrice } = require('../../utils/binanceApi.js');\nconst { SYMBOL_OPTIONS, INTERVAL_OPTIONS } = require('../../config/trading.js');\nconst { calcPositionSize } = require('../../utils/risk.js');\nexport default {\n    components: {\n        UiSection,\n        UiButton,\n        UiResultCard\n    },\n    data() {\n        return {\n            // ▼ 交易对列表 & 当前选择\n            symbolOptions: SYMBOL_OPTIONS,\n            symbol: 'BTCUSDT',\n            // ▼ K线周期列表（用于 ATR）\n            intervalOptions: INTERVAL_OPTIONS,\n            interval: '1h',\n            // ▼ ATR 输入（字符串，避免输入被覆盖）\n            atrPeriodInput: '14',\n            atrMultInput: '1.5',\n            // ▼ 风控输入\n            equityInput: '',\n            // 总本金（U）\n            riskPercentInput: '',\n            // 单笔风险比例（%）\n            leverageInput: '',\n            // 杠杆倍数\n\n            // ▼ 开仓 & 方向\n            entryPriceInput: '',\n            directionOptions: ['多单', '空单'],\n            direction: 'long',\n            // ▼ 最新价格展示\n            spotPrice: null,\n            futuresPrice: null,\n            priceDiff: null,\n            // 合约 - 现货\n\n            // ▼ 计算结果\n            loading: false,\n            atr: null,\n            stopLossPrice: null,\n            error: '',\n            rrRatio: null,\n            // ⭐ 新增：RR 显示用\n\n            // ▼ 仓位计算结果\n            riskAmount: null,\n            stopDistance: null,\n            positionNotional: null,\n            positionQty: null\n        };\n    },\n    onLoad() {\n        this.refreshPrices();\n    },\n    methods: {\n        // ====== 下拉选择 ======\n\n        onSymbolSelect(e) {\n            const idx = Number(e.detail.value);\n            const symbol = this.symbolOptions[idx];\n            this.setData(\n                {\n                    symbol\n                },\n                () => {\n                    this.refreshPrices();\n                }\n            );\n        },\n\n        onIntervalSelect(e) {\n            const idx = Number(e.detail.value);\n            this.setData({\n                interval: this.intervalOptions[idx]\n            });\n        },\n\n        onDirectionChange(e) {\n            const idx = Number(e.detail.value);\n            this.setData({\n                direction: idx === 0 ? 'long' : 'short'\n            });\n        },\n\n        // ====== 输入处理（全都存字符串） ======\n\n        onAtrPeriodInput(e) {\n            this.setData({\n                atrPeriodInput: e.detail.value\n            });\n        },\n\n        onAtrMultInput(e) {\n            this.setData({\n                atrMultInput: e.detail.value\n            });\n        },\n\n        onEquityInput(e) {\n            this.setData({\n                equityInput: e.detail.value\n            });\n        },\n\n        onRiskPercentInput(e) {\n            this.setData({\n                riskPercentInput: e.detail.value\n            });\n        },\n\n        onLeverageInput(e) {\n            this.setData({\n                leverageInput: e.detail.value\n            });\n        },\n\n        onEntryPriceInput(e) {\n            this.setData({\n                entryPriceInput: e.detail.value\n            });\n        },\n\n        // ====== 刷新价格（现货 + 合约） ======\n\n        refreshPrices() {\n            const { symbol } = this;\n            this.setData({\n                spotPrice: null,\n                futuresPrice: null,\n                priceDiff: null\n            });\n            Promise.all([fetchSpotPrice(symbol), fetchFuturesPrice(symbol)])\n                .then(([spot, fut]) => {\n                    const diff = fut - spot;\n                    this.setData({\n                        spotPrice: spot.toFixed(2),\n                        futuresPrice: fut.toFixed(2),\n                        priceDiff: diff.toFixed(2)\n                    });\n                })\n                .catch((err) => {\n                    console.error('刷新价格失败', err);\n                    this.setData({\n                        error: '刷新现货/合约价格失败（请检查合法域名配置）'\n                    });\n                });\n        },\n\n        // ====== 核心：计算 ATR + 止损 + 仓位 ======\n        onCalcTap() {\n            const { atrPeriodInput, atrMultInput, entryPriceInput, direction, symbol, interval, equityInput, riskPercentInput, leverageInput } = this;\n\n            // 解析数字\n            const atrPeriod = parseInt(atrPeriodInput, 10);\n            const atrMult = parseFloat(atrMultInput);\n            const entryPrice = parseFloat(entryPriceInput);\n            const equity = parseFloat(equityInput);\n            const riskPercent = parseFloat(riskPercentInput);\n            const leverage = parseFloat(leverageInput);\n\n            // 基础校验：先保证 ATR 与止损能算\n            if (!entryPrice || Number.isNaN(entryPrice) || entryPrice <= 0) {\n                this.setData({\n                    error: '开仓价无效，请输入开仓价',\n                    atr: null,\n                    stopLossPrice: null,\n                    riskAmount: null,\n                    stopDistance: null,\n                    positionNotional: null,\n                    positionQty: null,\n                    rrRatio: null\n                });\n                return;\n            }\n            if (!atrPeriod || Number.isNaN(atrPeriod) || atrPeriod <= 0) {\n                this.setData({\n                    error: 'ATR 周期无效，请输入大于 0 的整数',\n                    atr: null,\n                    stopLossPrice: null,\n                    riskAmount: null,\n                    stopDistance: null,\n                    positionNotional: null,\n                    positionQty: null,\n                    rrRatio: null\n                });\n                return;\n            }\n            if (!atrMult || Number.isNaN(atrMult) || atrMult <= 0) {\n                this.setData({\n                    error: 'ATR 倍数无效，请输入大于 0 的数字',\n                    atr: null,\n                    stopLossPrice: null,\n                    riskAmount: null,\n                    stopDistance: null,\n                    positionNotional: null,\n                    positionQty: null,\n                    rrRatio: null\n                });\n                return;\n            }\n            this.setData({\n                loading: true,\n                error: '',\n                atr: null,\n                stopLossPrice: null,\n                riskAmount: null,\n                stopDistance: null,\n                positionNotional: null,\n                positionQty: null,\n                rrRatio: null\n            });\n\n            // 先用现货 K 线算 ATR\n            fetchCandlesFromBinance(symbol, interval, 200)\n                .then((candles) => {\n                    const atr = calcATR(candles, atrPeriod);\n                    if (!atr) {\n                        this.setData({\n                            loading: false,\n                            error: 'K线数量不足，无法计算 ATR'\n                        });\n                        return;\n                    }\n\n                    // 1）计算止损价格（基于 ATR）\n                    let stopLossPrice;\n                    if (direction === 'long') {\n                        stopLossPrice = entryPrice - atrMult * atr;\n                    } else {\n                        stopLossPrice = entryPrice + atrMult * atr;\n                    }\n\n                    // 2）计算风险距离（entry 与 SL 的点差）\n                    let riskDistance;\n                    if (direction === 'long') {\n                        riskDistance = entryPrice - stopLossPrice;\n                    } else {\n                        riskDistance = stopLossPrice - entryPrice;\n                    }\n\n                    // 3）计算 RR（这里先用 ATR 倍数作为 reward/risk）\n                    const rrValue = atrMult; // reward / risk，本质就是 ATR 倍数\n                    const rrText = `1 : ${rrValue.toFixed(2)}`;\n\n                    // 4）基础结果（无风控参数时也能显示）\n                    const baseResult = {\n                        loading: false,\n                        atr: atr.toFixed(2),\n                        stopLossPrice: stopLossPrice.toFixed(2),\n                        stopDistance: riskDistance.toFixed(2),\n                        rrRatio: rrText\n                    };\n\n                    // 5）如果风控参数完整，计算仓位\n                    if (!Number.isNaN(equity) && equity > 0 && !Number.isNaN(riskPercent) && riskPercent > 0 && !Number.isNaN(leverage) && leverage > 0) {\n                        const pos = calcPositionSize({\n                            equity,\n                            riskPercent,\n                            leverage,\n                            entryPrice,\n                            stopLossPrice\n                        });\n                        if (pos) {\n                            this.setData({\n                                ...baseResult,\n                                riskAmount: pos.riskAmount.toFixed(2),\n                                // 这里用风控里的 stopDistance 也可以，\n                                // 如果你更相信 ATR 算出的，就保留 baseResult 的 stopDistance\n                                positionNotional: pos.finalNotional.toFixed(2),\n                                positionQty: pos.qty.toFixed(4)\n                            });\n                            return;\n                        }\n                    }\n\n                    // 6）风控参数不完整，只展示 ATR / SL / RR / 距离\n                    this.setData(baseResult);\n                })\n                .catch((err) => {\n                    console.error('请求K线失败', err);\n                    this.setData({\n                        loading: false,\n                        error: '请求现货K线失败（请确认 api.binance.com 合法域名已配置）'\n                    });\n                });\n        }\n    }\n};\n</script>\n<style>\n/* 可以加一点页面级的小调整 */\n.container {\n    /* 可选：稍微窄一点，看起来更像工具面板 */\n    max-width: 680rpx;\n    margin: 0 auto;\n}\n\n/* 给结果卡片一点额外的间距，方便观察 */\n.result-card-wrapper {\n    margin-top: 24rpx;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1763215344016\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}