{"version":3,"file":"atr.js","sources":["utils/atr.js"],"sourcesContent":["// utils/atr.js\n// 计算 ATR（Average True Range）\nexport function calcATR(candles, period) {\n    if (!candles || candles.length < period + 1) {\n        return null;\n    }\n\n    const trs = [];\n    for (let i = 1; i < candles.length; i++) {\n        const cur = candles[i];\n        const prev = candles[i - 1];\n\n        const range1 = cur.high - cur.low;\n        const range2 = Math.abs(cur.high - prev.close);\n        const range3 = Math.abs(cur.low - prev.close);\n\n        trs.push(Math.max(range1, range2, range3));\n    }\n\n    const lastTR = trs.slice(-period);\n    const avg = lastTR.reduce((a, b) => a + b, 0) / lastTR.length;\n\n    return avg;\n}"],"names":[],"mappings":";AAEO,SAAS,QAAQ,SAAS,QAAQ;AACrC,MAAI,CAAC,WAAW,QAAQ,SAAS,SAAS,GAAG;AACzC,WAAO;AAAA,EACV;AAED,QAAM,MAAM,CAAA;AACZ,WAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACrC,UAAM,MAAM,QAAQ,CAAC;AACrB,UAAM,OAAO,QAAQ,IAAI,CAAC;AAE1B,UAAM,SAAS,IAAI,OAAO,IAAI;AAC9B,UAAM,SAAS,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK;AAC7C,UAAM,SAAS,KAAK,IAAI,IAAI,MAAM,KAAK,KAAK;AAE5C,QAAI,KAAK,KAAK,IAAI,QAAQ,QAAQ,MAAM,CAAC;AAAA,EAC5C;AAED,QAAM,SAAS,IAAI,MAAM,CAAC,MAAM;AAChC,QAAM,MAAM,OAAO,OAAO,CAAC,GAAG,MAAM,IAAI,GAAG,CAAC,IAAI,OAAO;AAEvD,SAAO;AACX;;"}