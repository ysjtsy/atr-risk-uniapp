{"version":3,"file":"binanceApi.js","sources":["utils/binanceApi.js"],"sourcesContent":["// utils/binanceApi.js\n\n// 获取现货 K 线（用于 ATR）\nexport function fetchCandlesFromBinance(symbol, interval, limit = 200) {\n    return new Promise((resolve, reject) => {\n        uni.request({\n            url: 'https://api.binance.com/api/v3/klines',\n            method: 'GET',\n            data: {\n                symbol,\n                interval,\n                limit\n            },\n            success(res) {\n                if (res.statusCode === 200 && Array.isArray(res.data)) {\n                    const candles = res.data.map((item) => ({\n                        high: Number(item[2]),\n                        low: Number(item[3]),\n                        close: Number(item[4])\n                    }));\n                    resolve(candles);\n                } else {\n                    reject(new Error('现货K线数据格式错误'));\n                }\n            },\n            fail: reject\n        });\n    });\n}\n\n// 获取现货最新价\nexport function fetchSpotPrice(symbol) {\n    return new Promise((resolve, reject) => {\n        uni.request({\n            url: 'https://api.binance.com/api/v3/ticker/price',\n            method: 'GET',\n            data: {\n                symbol\n            },\n            success(res) {\n                if (res.statusCode === 200 && res.data && res.data.price) {\n                    resolve(Number(res.data.price));\n                } else {\n                    reject(new Error('现货价格数据错误'));\n                }\n            },\n            fail: reject\n        });\n    });\n}\n\n// 获取 U 本位合约最新价\nexport function fetchFuturesPrice(symbol) {\n    return new Promise((resolve, reject) => {\n        uni.request({\n            url: 'https://fapi.binance.com/fapi/v1/ticker/price',\n            method: 'GET',\n            data: {\n                symbol\n            },\n            success(res) {\n                if (res.statusCode === 200 && res.data && res.data.price) {\n                    resolve(Number(res.data.price));\n                } else {\n                    reject(new Error('合约价格数据错误'));\n                }\n            },\n            fail: reject\n        });\n    });\n}"],"names":["uni"],"mappings":";;AAGO,SAAS,wBAAwB,QAAQ,UAAU,QAAQ,KAAK;AACnE,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpCA,kBAAAA,MAAI,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,QACF;AAAA,QACA;AAAA,QACA;AAAA,MACH;AAAA,MACD,QAAQ,KAAK;AACT,YAAI,IAAI,eAAe,OAAO,MAAM,QAAQ,IAAI,IAAI,GAAG;AACnD,gBAAM,UAAU,IAAI,KAAK,IAAI,CAAC,UAAU;AAAA,YACpC,MAAM,OAAO,KAAK,CAAC,CAAC;AAAA,YACpB,KAAK,OAAO,KAAK,CAAC,CAAC;AAAA,YACnB,OAAO,OAAO,KAAK,CAAC,CAAC;AAAA,UACxB,EAAC;AACF,kBAAQ,OAAO;AAAA,QACnC,OAAuB;AACH,iBAAO,IAAI,MAAM,YAAY,CAAC;AAAA,QACjC;AAAA,MACJ;AAAA,MACD,MAAM;AAAA,IAClB,CAAS;AAAA,EACT,CAAK;AACL;AAGO,SAAS,eAAe,QAAQ;AACnC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpCA,kBAAAA,MAAI,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,QACF;AAAA,MACH;AAAA,MACD,QAAQ,KAAK;AACT,YAAI,IAAI,eAAe,OAAO,IAAI,QAAQ,IAAI,KAAK,OAAO;AACtD,kBAAQ,OAAO,IAAI,KAAK,KAAK,CAAC;AAAA,QAClD,OAAuB;AACH,iBAAO,IAAI,MAAM,UAAU,CAAC;AAAA,QAC/B;AAAA,MACJ;AAAA,MACD,MAAM;AAAA,IAClB,CAAS;AAAA,EACT,CAAK;AACL;AAGO,SAAS,kBAAkB,QAAQ;AACtC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpCA,kBAAAA,MAAI,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,MAAM;AAAA,QACF;AAAA,MACH;AAAA,MACD,QAAQ,KAAK;AACT,YAAI,IAAI,eAAe,OAAO,IAAI,QAAQ,IAAI,KAAK,OAAO;AACtD,kBAAQ,OAAO,IAAI,KAAK,KAAK,CAAC;AAAA,QAClD,OAAuB;AACH,iBAAO,IAAI,MAAM,UAAU,CAAC;AAAA,QAC/B;AAAA,MACJ;AAAA,MACD,MAAM;AAAA,IAClB,CAAS;AAAA,EACT,CAAK;AACL;;;;"}